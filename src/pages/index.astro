---
// Starlight Page Wrapper to keep the Navbar but have a custom landing
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';
import ChangelogList from '../components/ChangelogList.astro';
import LettaHero from '../components/LettaHero.astro';
import LettaFeatures from '../components/LettaFeatures.astro';
---

<StarlightPage frontmatter={{ title: 'SEOCHO | The OS for Agentic Knowledge Graphs', template: 'splash' }} hasSidebar={false}>
  
  <main class="relative min-h-screen w-full flex flex-col items-center overflow-x-hidden font-sans pb-24 selection:bg-zinc-500/30">
    
    <!-- Ultra Premium SVG Grain Noise Overlay -->
    <div class="pointer-events-none fixed inset-0 z-50 h-full w-full opacity-[0.03] mix-blend-overlay" style="background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.85%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E');"></div>

    <!-- Pitch Black Background Environment -->
    <div class="absolute inset-0 bg-[#000000] -z-20"></div>

    <!-- Letta Aesthetic Components -->
    <div class="landing-override w-full">
      <LettaHero />
      <LettaFeatures />
    </div>

    <!-- Quickstart Section (Glass Panel) -->
    <section class="max-w-4xl mx-auto px-6 py-16 w-full animate-fade-up delay-100 z-10">
      <div class="mb-10 text-center md:text-left">
        <h2 class="text-3xl font-bold tracking-tight text-white mb-2">Quickstart</h2>
        <p class="text-zinc-400 text-lg font-light">Get up and running locally in under 5 minutes.</p>
      </div>
      
      <div class="bg-[#040404] border border-white/10 rounded-2xl overflow-hidden p-8 md:p-10 shadow-2xl relative group transition-colors">
        <div class="absolute inset-0 bg-gradient-to-br from-white/[0.02] to-transparent pointer-events-none"></div>
        <div class="space-y-8 relative z-10">
          <div>
            <h3 class="text-zinc-100 font-semibold mb-3 flex items-center"><span class="flex items-center justify-center w-6 h-6 rounded-md bg-white/10 text-white text-xs mr-3 border border-white/10">1</span> Clone & Configure</h3>
            <div class="bg-white/5 border border-white/5 rounded-lg p-4 text-sm font-mono text-zinc-300 shadow-inner">
              git clone https://github.com/tteon/seocho.git<br/>
              cd seocho && cp .env.example .env
            </div>
          </div>
          <div>
            <h3 class="text-zinc-100 font-semibold mb-3 flex items-center"><span class="flex items-center justify-center w-6 h-6 rounded-md bg-white/10 text-white text-xs mr-3 border border-white/10">2</span> Spin Up Services</h3>
            <div class="bg-white/5 border border-white/5 rounded-lg p-4 text-sm font-mono text-zinc-300 shadow-inner">
              make up
            </div>
          </div>
          <div>
            <h3 class="text-zinc-100 font-semibold mb-3 flex items-center"><span class="flex items-center justify-center w-6 h-6 rounded-md bg-white/10 text-white text-xs mr-3 border border-white/10">3</span> Execute Debate Query</h3>
            <div class="bg-white/5 border border-white/5 rounded-lg p-4 text-sm font-mono text-zinc-300 shadow-inner whitespace-pre overflow-x-auto">
curl -X POST http://localhost:8001/run_debate \
  -H "Content-Type: application/json" \
  -d '{'{"'}query": "What relationships are in the database?"{'}'}'
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Architecture Section -->
    <section class="max-w-6xl mx-auto px-6 py-20 w-full animate-fade-up delay-300 z-10">
      <div class="mb-14 text-center md:text-left">
        <h2 class="text-3xl font-bold tracking-tight text-white mb-3">System Architecture</h2>
        <p class="text-zinc-400 text-lg font-light max-w-2xl">From document ingestion to asynchronous agent debate routing.</p>
      </div>

      <div class="bg-[#040404] border border-white/10 rounded-2xl overflow-hidden p-8 md:p-12 flex justify-center items-center shadow-2xl text-xs md:text-sm relative">
        <div class="absolute inset-0 bg-gradient-to-b from-white/[0.02] to-transparent pointer-events-none"></div>
        <pre class="mermaid bg-transparent mx-auto relative z-10">
graph TD
    classDef external fill:transparent,stroke:#52525B,stroke-width:1px,stroke-dasharray:5 5,color:#A1A1AA
    classDef pipeline fill:#ffffff10,stroke:#d4d4d8,stroke-width:1px,color:#e4e4e7
    classDef db fill:#ffffff05,stroke:#a1a1aa,stroke-width:1px,color:#d4d4d8
    classDef agent fill:#ffffff15,stroke:#f4f4f5,stroke-width:1px,color:#ffffff
    classDef user fill:transparent,stroke:none,color:#E4E4E7,font-weight:bold

    User(("User Query")):::user
    subgraph DataPlane["Data Extraction Pipeline"]
        DS["Raw Sources"]:::external-->Extractor["LLM Extractor"]:::pipeline
        Extractor-->Linker["Entity Linker & Semantic Deduplication"]:::pipeline
        Linker-->DBManager["Dynamic DB Provisioner"]:::pipeline
    end
    subgraph ControlPlane["Parallel Debate Orchestrator"]
        Router["Debate Router"]:::agent
        Agent1["Agent (Domain A)"]:::agent
        Agent2["Agent (Domain B)"]:::agent
        Supervisor["Synthesis Supervisor"]:::agent
    end
    Neo4j[("Neo4j / DozerDB Partitions")]:::db

    DBManager --> Neo4j
    User --> Router
    Router -->|Fan-Out Async| Agent1
    Router -->|Fan-Out Async| Agent2
    Agent1 -.-> Neo4j
    Agent2 -.-> Neo4j
    Agent1 -->|Collect State| Supervisor
    Agent2 -->|Collect State| Supervisor
    Supervisor -->|Resolved Answer| User
        </pre>
      </div>
    </section>

    <!-- Updates Section -->
    <section class="max-w-4xl mx-auto px-6 py-24 w-full animate-fade-up delay-300 z-10">
      <div class="flex items-end justify-between border-b border-white/10 pb-6 mb-10">
        <div>
          <h2 class="text-2xl font-bold tracking-tight text-white mb-2">Latest Updates</h2>
          <p class="text-zinc-500 text-sm font-light">Continuously integrated signals from GitHub Releases.</p>
        </div>
        <a href="/changelog/" class="text-sm font-medium text-zinc-300 hover:text-white transition-colors flex items-center">View All <span class="ml-1 text-lg leading-none">→</span></a>
      </div>

      <ChangelogList />
    </section>

    <!-- FAQ Section -->
    <section class="max-w-4xl mx-auto px-6 py-12 w-full animate-fade-up delay-300 z-10 mb-20">
      <div class="mb-12 text-center">
        <h2 class="text-3xl font-bold tracking-tight text-white mb-2">FAQ</h2>
      </div>
      <div class="space-y-4">
        <details class="group bg-[#040404] border border-white/10 p-6 md:p-8 rounded-2xl cursor-pointer hover:bg-white/[0.02] transition-colors">
          <summary class="flex justify-between items-center text-zinc-100 font-semibold list-none text-lg">
            What exactly is Parallel Debate?
            <span class="transition-transform group-open:rotate-180 text-zinc-500">↓</span>
          </summary>
          <p class="text-zinc-400 text-sm mt-4 leading-relaxed font-light border-t border-white/5 pt-4">It's an orchestration framework where multiple isolated LLM agents execute reasoning paths concurrently against the graph database. A Supervisor agent then evaluates conflicting conclusions from these agents to provide the single most grounded answer.</p>
        </details>
        
        <details class="group bg-[#040404] border border-white/10 p-6 md:p-8 rounded-2xl cursor-pointer hover:bg-white/[0.02] transition-colors">
          <summary class="flex justify-between items-center text-zinc-100 font-semibold list-none text-lg">
            Why do I need dynamic databases?
            <span class="transition-transform group-open:rotate-180 text-zinc-500">↓</span>
          </summary>
          <p class="text-zinc-400 text-sm mt-4 leading-relaxed font-light border-t border-white/5 pt-4">Unlike monolithic deployment strategies, SEOCHO provisions entirely isolated Neo4j/DozerDB instances for distinctly separate datasets on the fly. This enforces hardened physical boundaries and protects schema integrity per ingestion cluster.</p>
        </details>
        
        <details class="group bg-[#040404] border border-white/10 p-6 md:p-8 rounded-2xl cursor-pointer hover:bg-white/[0.02] transition-colors">
          <summary class="flex justify-between items-center text-zinc-100 font-semibold list-none text-lg">
            Does it integrate with my existing Neo4j?
            <span class="transition-transform group-open:rotate-180 text-zinc-500">↓</span>
          </summary>
          <p class="text-zinc-400 text-sm mt-4 leading-relaxed font-light border-t border-white/5 pt-4">Yes. While we default to containerized DozerDB endpoints, SEOCHO's Data Pipeline can map semantic entities and perform insertions into any standard Neo4j or Aura graph engine via the Bolt protocol specifications.</p>
        </details>
        
        <details class="group bg-[#040404] border border-white/10 p-6 md:p-8 rounded-2xl cursor-pointer hover:bg-white/[0.02] transition-colors">
          <summary class="flex justify-between items-center text-zinc-100 font-semibold list-none text-lg">
            What observability tools are used?
            <span class="transition-transform group-open:rotate-180 text-zinc-500">↓</span>
          </summary>
          <p class="text-zinc-400 text-sm mt-4 leading-relaxed font-light border-t border-white/5 pt-4">We implement native integration hooks with Opik. This provides millisecond tracing of prompt payloads, LLM token expenditures, latency waterfalls, and a full structural view into the reasoning tree of the parallel agents.</p>
        </details>
      </div>
    </section>

  </main>
</StarlightPage>

<style>
:global(.sl-container) {
  max-width: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
}
:global(.sl-markdown-content) {
  display: contents !important;
}
</style>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true, theme: 'dark', backgroundColor: 'transparent' });
</script>
